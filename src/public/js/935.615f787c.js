"use strict";(self["webpackChunkmy_vue"]=self["webpackChunkmy_vue"]||[]).push([[935],{4472:function(e,l,a){a.d(l,{$M:function(){return d},EK:function(){return n},M:function(){return t},VJ:function(){return o},Zp:function(){return i},aW:function(){return r},m_:function(){return s},vB:function(){return u}});new Map([["0","完成"],["1","待支付"],["2","清洗中"]]),new Map([[0,"未删除"],[1,"删除"]]);const t=new Map([[0,"正常"],[1,"封禁"]]),u=e=>t.get(e),d=new Map([[1,"已下架"],[0,"正常"]]),o=new Map([[0,"正常"],[3,"赠送券"]]),i=new Map([[1,"已下架"],[0,"正常"],[2,"已抢完"],[3,"赠送券"]]),n=new Map([[0,"管理员"],[1,"普通用户"]]),r=e=>d.get(e),s=e=>i.get(e)},2076:function(e,l,a){a.d(l,{w:function(){return d}});var t=a(5743),u=a.n(t);const d=e=>u()(e).format("YYYY-MM-DD hh:mm:ss")},89:function(e,l){l.Z=(e,l)=>{const a=e.__vccOpts||e;for(const[t,u]of l)a[t]=u;return a}},935:function(e,l,a){a.r(l),a.d(l,{default:function(){return x}});var t=a(3396),u=a(7139),d=a(4870),o=a(2483),i=a(4472),n=a(7944),r=a(2076),s=a(7178);const m=e=>((0,t.dD)("data-v-add795f8"),e=e(),(0,t.Cn)(),e),c={class:"main"},p={class:"title"},g={class:"content"},w={class:"searchGourp"},_=m((()=>(0,t._)("label",null,"商品名称",-1))),f=m((()=>(0,t._)("label",null,"状态",-1))),y={class:"buttonGroup"},v={class:"table"},b={class:"page"},h=["src"],W={class:"dialog-footer"};var k=(0,t.aZ)({__name:"productList",setup(e){const l=(0,d.iH)([]),a=(0,o.yj)();let m=(0,d.iH)(a.query.contentName);const k=(0,d.qj)({productTypeId:"",tradeName:"",index:1,status:void 0}),V=(0,d.iH)([]),U=(0,d.qj)({maxheight:450,textAlign:{textAlign:"center"},loading:!1}),x=(0,d.iH)(0),C=(0,d.qj)({show:!1,title:"",isAdd:!1}),j=(0,d.iH)([]),q=(0,d.qj)({id:"",name:"",desc:"",image:"",money:void 0,create_time:"",status:void 0,product_type_id:void 0}),M=()=>{q.id="",q.name="",q.image="",q.money=void 0,q.create_time="",q.status=void 0,q.desc="",q.product_type_id=void 0},z=e=>{q.id=e.id.toString(),q.name=e.name,q.image=e.image,q.money=e.money/100,q.create_time=e.create_time,q.status=e.status,q.desc=e.desc,q.product_type_id=e.product_type_id},H=(e,l)=>{q.image=e.msg},D=async()=>{U.loading=!0;const{code:e,data:{rows:l,count:a}}=await(0,n.Gq)(k.productTypeId,k.index,k.tradeName,k.status);200==e&&(U.loading=!1,V.value=l,x.value=a)},A=async()=>{const{code:e,data:a}=await(0,n.lw)(0);200==e&&(l.value=a,l.value.unshift({id:"",label:"全部商品",create_time:"",status:void 0}))},N=()=>{C.show=!0,C.title="添加商品",C.isAdd=!0,M()},Y=e=>{C.show=!0,C.title="编辑商品",C.isAdd=!1,z(e)},I=async e=>{e&&await e.validate((async(e,l)=>{if(e){const{msg:e,code:l}=await(0,n.Jg)(q.id,q.name,q.desc,q.image,q.money,q.status,q.product_type_id);200===l&&(C.show=!1,D(),s.z8.success(e))}else console.log("error submit!",l)}))},S=async e=>{e&&await e.validate((async(e,l)=>{if(e){const{msg:e,code:l}=await(0,n.Nq)(q.name,q.desc,q.image,q.money,q.status,q.product_type_id);200==l&&(C.show=!1,D(),s.z8.success(e))}else console.log("error submit!",l)}))},$=()=>{k.index=1,k.productTypeId="",k.tradeName="",k.status=void 0,D()},K=(0,d.iH)(),T=(0,d.qj)({name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:18,message:"长度为2-18",trigger:"blur"}],image:[{required:!0,message:"需要存储图片",trigger:"blur"}],money:[{required:!0,message:"请输入价格",trigger:"blur"},{pattern:/^\d+(\.\d{2})?$/,message:"请输入带两位小数的金额",trigger:"blur"}],status:[{required:!0,message:"选择状态",trigger:"blur"}],product_type_id:[{required:!0,message:"选择类型",trigger:"blur"}]}),Z=e=>{j.value=e},B=async()=>{const e=j.value.map((e=>e.id)),{msg:l,code:a}=await(0,n.BR)(e,1);200==a&&(D(),s.z8.success(l))},G=e=>"image/jpeg"!==e.type?(s.z8.error("需要使用jpg结尾"),!1):!(e.size/1024/1024>2)||(s.z8.error("Avatar picture size can not exceed 2MB!"),!1),R=(0,d.iH)();return(0,t.bv)((()=>{A(),D()})),(e,a)=>{const o=(0,t.up)("el-col"),n=(0,t.up)("el-tab-pane"),s=(0,t.up)("el-tabs"),M=(0,t.up)("el-input"),z=(0,t.up)("el-option"),A=(0,t.up)("el-select"),J=(0,t.up)("el-button"),P=(0,t.up)("el-table-column"),E=(0,t.up)("el-avatar"),F=(0,t.up)("el-table"),L=(0,t.up)("el-pagination"),O=(0,t.up)("el-row"),Q=(0,t.up)("el-form-item"),X=(0,t.up)("Plus"),ee=(0,t.up)("el-icon"),le=(0,t.up)("el-upload"),ae=(0,t.up)("el-form"),te=(0,t.up)("el-dialog"),ue=(0,t.up)("el-card"),de=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",c,[(0,t.Wm)(ue,null,{default:(0,t.w5)((()=>[(0,t.Wm)(O,null,{default:(0,t.w5)((()=>[(0,t.Wm)(o,{xs:1,sm:1,md:1,lg:1,xl:1}),(0,t.Wm)(o,{xs:22,sm:22,md:22,lg:22,xl:22},{default:(0,t.w5)((()=>[(0,t._)("div",p,(0,u.zw)((0,d.SU)(m)),1),(0,t._)("div",g,[(0,t.Wm)(s,{modelValue:k.productTypeId,"onUpdate:modelValue":a[0]||(a[0]=e=>k.productTypeId=e),onClick:D},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.value,((e,l)=>((0,t.wg)(),(0,t.j4)(n,{key:l,label:e.label,name:e.id},null,8,["label","name"])))),128))])),_:1},8,["modelValue"]),(0,t._)("div",w,[(0,t._)("div",null,[_,(0,t.Uk)("  "),(0,t.Wm)(M,{modelValue:k.tradeName,"onUpdate:modelValue":a[1]||(a[1]=e=>k.tradeName=e),placeholder:"商品名称"},null,8,["modelValue"])]),(0,t._)("div",null,[f,(0,t.Wm)(A,{placeholder:"选择状态",modelValue:k.status,"onUpdate:modelValue":a[2]||(a[2]=e=>k.status=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,d.SU)(i.$M),(e=>((0,t.wg)(),(0,t.j4)(z,{key:e[0],label:e[1],value:e[0]},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,t._)("div",null,[(0,t._)("button",{onClick:D},"查询")]),(0,t._)("div",null,[(0,t._)("button",{onClick:$},"清空")])]),(0,t._)("div",y,[(0,t.Wm)(J,{type:"primary",onClick:N},{default:(0,t.w5)((()=>[(0,t.Uk)(" 添加")])),_:1}),(0,t.Wm)(J,{type:"danger",disabled:0===j.value?.length,onClick:B},{default:(0,t.w5)((()=>[(0,t.Uk)(" 删除")])),_:1},8,["disabled"]),(0,t.Wm)(J,{type:"success",disabled:1!==j.value?.length,onClick:a[3]||(a[3]=e=>Y(j.value[0]))},{default:(0,t.w5)((()=>[(0,t.Uk)("修改")])),_:1},8,["disabled"])]),(0,t._)("div",v,[(0,t.wy)(((0,t.wg)(),(0,t.j4)(F,{data:V.value,onSelectionChange:Z,"max-height":U.maxheight,"cell-style":U.textAlign,"header-cell-style":U.textAlign},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{type:"selection",width:"50"}),(0,t.Wm)(P,{prop:"id",label:"ID","min-width":"80"}),(0,t.Wm)(P,{prop:"name",label:"Name","min-width":"70"}),(0,t.Wm)(P,{prop:"image",label:"图片","min-width":"70"},{default:(0,t.w5)((e=>[(0,t.Wm)(E,{size:50,src:`/file/image/${e.row.image}`,shape:"square"},null,8,["src"])])),_:1}),(0,t.Wm)(P,{prop:"money",label:"价格","min-width":"70"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,u.zw)(e.row.money/100),1)])),_:1}),(0,t.Wm)(P,{label:"类型",prop:"product_type.label"}),(0,t.Wm)(P,{prop:"status",label:"状态","min-width":"70"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,u.zw)((0,d.SU)(i.aW)(e.row.status)),1)])),_:1}),(0,t.Wm)(P,{prop:"desc",label:"描述","min-width":"100"}),(0,t.Wm)(P,{prop:"create_time",label:"创建时间","min-width":"150"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,u.zw)((0,d.SU)(r.w)(e.row.create_time)),1)])),_:1}),(0,t.Wm)(P,{label:"操作",width:"100"},{default:(0,t.w5)((e=>[(0,t.Wm)(J,{type:"primary",class:"edit",onClick:l=>Y(e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","max-height","cell-style","header-cell-style"])),[[de,U.loading]])]),(0,t._)("div",b,[(0,t.Wm)(L,{background:"",layout:"prev, pager, next",total:x.value,"current-page":k.index,"onUpdate:currentPage":a[4]||(a[4]=e=>k.index=e),onCurrentChange:D},null,8,["total","current-page"])])])])),_:1}),(0,t.Wm)(o,{xs:1,sm:1,md:1,lg:1,xl:1})])),_:1}),(0,t.Wm)(te,{modelValue:C.show,"onUpdate:modelValue":a[13]||(a[13]=e=>C.show=e),title:C.title,width:"30%"},{footer:(0,t.w5)((()=>[(0,t._)("span",W,[(0,t.Wm)(J,{onClick:a[10]||(a[10]=e=>C.show=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),C.isAdd?((0,t.wg)(),(0,t.j4)(J,{key:0,type:"primary",onClick:a[11]||(a[11]=e=>S(K.value))},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认添加 ")])),_:1})):((0,t.wg)(),(0,t.j4)(J,{key:1,type:"primary",onClick:a[12]||(a[12]=e=>I(K.value))},{default:(0,t.w5)((()=>[(0,t.Uk)(" 确认修改 ")])),_:1}))])])),default:(0,t.w5)((()=>[(0,t.Wm)(ae,{ref_key:"ruleFormRef",ref:K,model:q,rules:T,"label-width":"80"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{prop:"name",label:"商品名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{placeholder:"商品名称",modelValue:q.name,"onUpdate:modelValue":a[5]||(a[5]=e=>q.name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(Q,{prop:"money",label:"商品价格"},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{placeholder:"价格",maxlength:8,modelValue:q.money,"onUpdate:modelValue":a[6]||(a[6]=e=>q.money=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(Q,{label:"商品图片",prop:"image"},{default:(0,t.w5)((()=>[(0,t.Wm)(le,{class:"avatar-uploader",limit:1,action:"/file/upload","show-file-list":!1,"before-upload":G,"on-success":H,ref_key:"uploadRef",ref:R},{default:(0,t.w5)((()=>[q.image?((0,t.wg)(),(0,t.iD)("img",{key:0,src:`/file/image/${q.image}`,class:"avatar"},null,8,h)):((0,t.wg)(),(0,t.j4)(ee,{key:1,class:"avatar-uploader-icon"},{default:(0,t.w5)((()=>[(0,t.Wm)(X)])),_:1}))])),_:1},512)])),_:1}),(0,t.Wm)(Q,{prop:"product_type_id",label:"类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{placeholder:"选择类型",modelValue:q.product_type_id,"onUpdate:modelValue":a[7]||(a[7]=e=>q.product_type_id=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.value.slice(1,l.value.length),(e=>((0,t.wg)(),(0,t.j4)(z,{key:e.id,label:e.label,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(Q,{prop:"status",label:"状态"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{placeholder:"选择状态",modelValue:q.status,"onUpdate:modelValue":a[8]||(a[8]=e=>q.status=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,d.SU)(i.$M),(e=>((0,t.wg)(),(0,t.j4)(z,{key:e[0],label:e[1],value:e[0]},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(Q,{label:"描述"},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{placeholder:"描述",modelValue:q.desc,"onUpdate:modelValue":a[9]||(a[9]=e=>q.desc=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])),_:1})])}}}),V=a(89);const U=(0,V.Z)(k,[["__scopeId","data-v-add795f8"]]);var x=U}}]);
//# sourceMappingURL=935.615f787c.js.map