"use strict";(self["webpackChunkmy_vue"]=self["webpackChunkmy_vue"]||[]).push([[315],{2076:function(e,a,l){l.d(a,{w:function(){return u}});var t=l(5743),o=l.n(t);const u=e=>o()(e).format("YYYY-MM-DD hh:mm:ss")},89:function(e,a){a.Z=(e,a)=>{const l=e.__vccOpts||e;for(const[t,o]of a)l[t]=o;return l}},8315:function(e,a,l){l.r(a),l.d(a,{default:function(){return I}});l(6229),l(7330),l(2062);var t=l(3396),o=l(7139),u=l(4870),s=l(2483),d=l(7944),n=l(7178),r=l(2076);const w=e=>((0,t.dD)("data-v-a95d7b2a"),e=e(),(0,t.Cn)(),e),i={class:"main"},c={class:"searchGourp"},m=w((()=>(0,t._)("label",null,"订单号",-1))),_={m:"8"},v={class:"card"},p={m:"t-0 b-2"},b={m:"t-0 b-2"},g={m:"t-0 b-2"},y=["src"],k=w((()=>(0,t._)("br",null,null,-1))),f={class:"card"},x={m:"t-0 b-2"},h={m:"t-0 b-2"},z={m:"t-0 b-2"},U={class:"card"},W={m:"t-0 b-2"},C={m:"t-0 b-2"},j={class:"page"},V={class:"bgc_button"};var H=(0,t.aZ)({__name:"orderList",setup(e){const a=new Map([[null,"未支付"],[0,"微信支付"],[1,"余额支付"]]),l=new Map([[0,"未支付"],[1,"待取货"],[2,"待清洗"],[3,"配送中"],[4,"已完成"],[5,"已取消"]]),w=new Map([[0,1],[1,2],[2,3],[3,4]]),H=(0,u.iH)(),D=(0,u.iH)(""),L=(0,s.yj)();(0,u.iH)(L.query.contentName);const I=(0,u.iH)([{label:"全部",value:10},{label:"未支付",value:0},{label:"待取货",value:1},{label:"待清洗",value:2},{label:"配送中",value:3},{label:"已完成",value:4},{label:"已取消",value:5}]),Y=(0,u.qj)({show:!1,text:"导出中，请耐心等待"}),q=(0,u.iH)(!1),M=(0,u.iH)([]),R=(0,u.iH)([]),O=(0,u.iH)(10),Z=(0,u.qj)({orderId:void 0,index:1,status:10}),E=(0,u.iH)(),K=(0,t.Fl)((()=>M.value.filter((e=>!D.value||e.toLowerCase().includes(D.value.toLowerCase()))))),P=e=>a.get(e),$=e=>l.get(e),B=async e=>{const{msg:a,code:l}=await(0,d.j$)(e.order_id,w.get(e.status));200==l&&(n.z8.success(a),G())},F=async()=>{const{data:e}=await(0,d.ht)();M.value=e},G=async()=>{Y.show=!0,10===Z.status&&(Z.status=void 0);const{data:{rows:e,count:a}}=await(0,d.Pe)(Z.index,Z.status,Z.orderId);R.value=e,O.value=a,Y.show=!1},N=e=>{let a=0;return void 0!==e&&e.forEach((e=>{a+=e.number})),a},Q=async e=>{Y.show=!0,H.value="下载中";const a=await(0,d.LR)(e);try{let l=new Blob([a.data]);const t=window.URL.createObjectURL(l),o=document.createElement("a");o.href=t,o.download=e,o.click(),window.URL.revokeObjectURL(t)}catch(l){n.z8.error("下载失败")}finally{F(),Y.show=!1}},S=async()=>{E.value="导出中,请耐心等待",H.value="导出中,请耐心等待",Y.show=!0;const{code:e}=await(0,d._V)();Y.show=!1;try{200==e&&F()}catch(a){n.z8.error("导出失败")}finally{E.value="",Y.show=!1}},X=async()=>{Y.show=!0,H.value="清除中";const{data:e,code:a}=await(0,d.y4)(M.value);try{200===a&&(n.z8.success("清除成功"),F())}catch(l){n.z8.error("清除失败")}finally{Y.show=!1,q.value=!1}},A=async e=>{Y.show=!0,H.value="清除中";const{data:a,code:l}=await(0,d.y4)([e]);Y.show=!1;try{200===l&&(n.z8.success("清除成功"),F())}catch(t){n.z8.error("清除失败")}};return(0,t.bv)((()=>{G(),F()})),(e,a)=>{const l=(0,t.up)("el-col"),s=(0,t.up)("el-tab-pane"),d=(0,t.up)("el-tabs"),n=(0,t.up)("el-input"),w=(0,t.up)("el-tag"),L=(0,t.up)("el-table-column"),F=(0,t.up)("el-button"),J=(0,t.up)("el-table"),T=(0,t.up)("el-pagination"),ee=(0,t.up)("el-row"),ae=(0,t.up)("el-card"),le=(0,t.up)("el-dialog"),te=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(ae,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ee,null,{default:(0,t.w5)((()=>[(0,t.Wm)(l,{xs:1,sm:1,md:1,lg:1,xl:1}),(0,t.wy)(((0,t.wg)(),(0,t.j4)(l,{xs:22,sm:22,md:22,lg:22,xl:22,"element-loading-text":E.value},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{modelValue:Z.status,"onUpdate:modelValue":a[0]||(a[0]=e=>Z.status=e),onClick:G},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(I.value,((e,a)=>((0,t.wg)(),(0,t.j4)(s,{key:a,label:e.label,"element-loading-text":Y.text,name:e.value},null,8,["label","element-loading-text","name"])))),128))])),_:1},8,["modelValue"]),(0,t._)("div",c,[(0,t._)("div",null,[m,(0,t.Uk)("  "),(0,t.Wm)(n,{modelValue:Z.orderId,"onUpdate:modelValue":a[1]||(a[1]=e=>Z.orderId=e),placeholder:"订单号"},null,8,["modelValue"])]),(0,t._)("div",null,[(0,t._)("button",{onClick:G}," 查询")]),(0,t._)("div",null,[0===M.value.length?((0,t.wg)(),(0,t.iD)("button",{key:0,class:"button_primary",onClick:S},"导出")):((0,t.wg)(),(0,t.iD)("button",{key:1,class:"button_primary",onClick:a[2]||(a[2]=e=>q.value=!0)},"导出"))])]),(0,t.Wm)(J,{data:R.value,border:!1},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{type:"expand"},{default:(0,t.w5)((e=>[(0,t._)("div",_,[(0,t._)("div",v,[(0,t._)("div",p,[(0,t.Uk)("支付方式:"),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(P(e.row.payment)),1)])),_:2},1024)]),(0,t._)("div",b,"商品数量: "+(0,o.zw)(N(e.row.xlxw_order_trades)),1),(0,t._)("div",g,"总价:"+(0,o.zw)(e.row.actual_payment/100),1)]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.row.xlxw_order_trades,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"card",key:a},[(0,t._)("div",null,[(0,t._)("img",{src:`/file/image/${e.xlxw_trade.image}`,class:"avatar"},null,8,y)]),(0,t._)("div",null,[(0,t.Uk)((0,o.zw)(e.xlxw_trade.name),1),k,(0,t.Uk)(" ￥"+(0,o.zw)(e.xlxw_trade.money/100),1)]),(0,t._)("div",null," X "+(0,o.zw)(e.number),1)])))),128)),(0,t._)("div",f,[(0,t._)("div",x,"名称: "+(0,o.zw)(e.row.xlxw_address.consignee_name),1),(0,t._)("div",h,"手机号: "+(0,o.zw)(e.row.xlxw_address.phone),1),(0,t._)("div",z,"详细地址:"+(0,o.zw)(e.row.xlxw_address.dormitory_number)+(0,o.zw)(e.row.xlxw_address.lou_number),1)]),(0,t._)("div",U,[(0,t._)("div",W,"描述: "+(0,o.zw)(e.row.xlxw_address.desc),1)])])])),_:1}),(0,t.Wm)(L,{label:"ID",prop:"id"}),(0,t.Wm)(L,{label:"买家"},{default:(0,t.w5)((e=>[(0,t._)("div",C,(0,o.zw)(e.row.xlxw_address.consignee_name),1)])),_:1}),(0,t.Wm)(L,{label:"订单号",prop:"order_id"}),(0,t.Wm)(L,{label:"订单状态"},{default:(0,t.w5)((e=>[0===e.row.status?((0,t.wg)(),(0,t.j4)(w,{key:0,type:"warning"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)($(e.row.status)),1)])),_:2},1024)):e.row.status>0&&e.row.status<4?((0,t.wg)(),(0,t.j4)(w,{key:1},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)($(e.row.status)),1)])),_:2},1024)):4===e.row.status?((0,t.wg)(),(0,t.j4)(w,{key:2,type:"success"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)($(e.row.status)),1)])),_:2},1024)):5===e.row.status?((0,t.wg)(),(0,t.j4)(w,{key:3,type:"danger"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)($(e.row.status)),1)])),_:2},1024)):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(L,{label:"创建时间",prop:"create_time"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)((0,u.SU)(r.w)(e.row.create_time)),1)])),_:1}),(0,t.Wm)(L,{label:"编辑"},{default:(0,t.w5)((e=>[e.row.status>0&&e.row.status<4?((0,t.wg)(),(0,t.j4)(F,{key:0,size:"small",type:"primary",onClick:a=>B(e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("下一步")])),_:2},1032,["onClick"])):(0,t.kq)("",!0)])),_:1})])),_:1},8,["data"]),(0,t._)("div",j,[(0,t.Wm)(T,{background:"",layout:"prev, pager, next",total:O.value,"current-page":Z.index,"onUpdate:currentPage":a[3]||(a[3]=e=>Z.index=e),onCurrentChange:G},null,8,["total","current-page"])])])),_:1},8,["element-loading-text"])),[[te,Y.show]]),(0,t.Wm)(l,{xs:1,sm:1,md:1,lg:1,xl:1})])),_:1})])),_:1}),(0,t.Wm)(le,{modelValue:q.value,"onUpdate:modelValue":a[5]||(a[5]=e=>q.value=e),title:"下载订单",class:"dialog"},{default:(0,t.w5)((()=>[(0,t._)("div",V,[(0,t.Wm)(F,{size:"small",onClick:X},{default:(0,t.w5)((()=>[(0,t.Uk)("清空")])),_:1}),(0,t.Wm)(F,{size:"small",onClick:S,type:"danger"},{default:(0,t.w5)((()=>[(0,t.Uk)("生成")])),_:1})]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(J,{data:K.value,style:{width:"100%"},height:300,"element-loading-text":H.value},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{label:"文件名"},{default:(0,t.w5)((e=>[(0,t.Uk)((0,o.zw)(e.row),1)])),_:1}),(0,t.Wm)(L,{align:"right"},{header:(0,t.w5)((()=>[(0,t.Wm)(n,{size:"small",modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=e=>D.value=e),placeholder:"文件名"},null,8,["modelValue"])])),default:(0,t.w5)((e=>[(0,t.Wm)(F,{size:"small",onClick:a=>Q(e.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("下载")])),_:2},1032,["onClick"]),(0,t.Wm)(F,{size:"small",onClick:a=>A(e.row),type:"danger"},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","element-loading-text"])),[[te,Y.show]])])),_:1},8,["modelValue"])])}}}),D=l(89);const L=(0,D.Z)(H,[["__scopeId","data-v-a95d7b2a"]]);var I=L}}]);
//# sourceMappingURL=315.9e5251d7.js.map